#!/bin/env python

# Import modules
import xdd_settings
import xdd
import unittest

# Standard testing strategy: try to check each side of each branch statement
# for correctness

# Test checkPreconditions method of Flow
class TransferManagerCreateFlowsTestCase(unittest.TestCase):
    """Test createFlows method of Flow"""

    def test_empty(self):
        """Test a local mem to mem transfer"""
        tm = xdd.TransferManager()
        rc = tm.createFlows()
        self.assertEqual(1, rc)

    def test_local_mem_to_mem(self):
        """Test a local mem to mem transfer"""
        tm = xdd.TransferManager()
        tm.setRequestSize(1024)
        tm.setTransferSize(1024*4)
        tm.setSourceTarget("/dev/zero")
        tm.setSinkTarget("/dev/null")
        tm.addSource("localhost", 1)
        tm.addSink("localhost", 1)
        rc = tm.createFlows()
        self.assertEqual(0, rc)

if __name__ == '__main__':
    unittest.main()
